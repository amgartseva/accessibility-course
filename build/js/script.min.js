!function(){if("undefined"!=typeof window){const i=Array.prototype.slice,s=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(",");class n{constructor(e,t){this._inertManager=t,this._rootElement=e,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}destructor(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(e){this._unmanageNode(e.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}get managedNodes(){return new Set(this._managedNodes)}get hasSavedAriaHidden(){return null!==this._savedAriaHidden}set savedAriaHidden(e){this._savedAriaHidden=e}get savedAriaHidden(){return this._savedAriaHidden}_makeSubtreeUnfocusable(r){c(r,e=>this._visitNode(e));let o=document.activeElement;if(!document.body.contains(r)){let e=r,t=void 0;for(;e;){if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){t=e;break}e=e.parentNode}t&&(o=t.activeElement)}r.contains(o)&&(o.blur(),o===document.activeElement&&document.body.focus())}_visitNode(e){if(e.nodeType===Node.ELEMENT_NODE){const t=e;t!==this._rootElement&&t.hasAttribute("inert")&&this._adoptInertRoot(t),(s.call(t,r)||t.hasAttribute("tabindex"))&&this._manageNode(t)}}_manageNode(e){e=this._inertManager.register(e,this);this._managedNodes.add(e)}_unmanageNode(e){e=this._inertManager.deregister(e,this);e&&this._managedNodes.delete(e)}_unmanageSubtree(e){c(e,e=>this._unmanageNode(e))}_adoptInertRoot(e){let t=this._inertManager.getInertRoot(e);t||(this._inertManager.setInert(e,!0),t=this._inertManager.getInertRoot(e)),t.managedNodes.forEach(function(e){this._manageNode(e.node)},this)}_onMutation(e,t){e.forEach(function(e){const t=e.target;if("childList"===e.type)i.call(e.addedNodes).forEach(function(e){this._makeSubtreeUnfocusable(e)},this),i.call(e.removedNodes).forEach(function(e){this._unmanageSubtree(e)},this);else if("attributes"===e.type)if("tabindex"===e.attributeName)this._manageNode(t);else if(t!==this._rootElement&&"inert"===e.attributeName&&t.hasAttribute("inert")){this._adoptInertRoot(t);const r=this._inertManager.getInertRoot(t);this._managedNodes.forEach(function(e){t.contains(e.node)&&r._manageNode(e.node)})}},this)}}class a{constructor(e,t){this._node=e,this._overrodeFocusMethod=!1,this._inertRoots=new Set([t]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}destructor(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){const e=this._node;null!==this._savedTabIndex?e.setAttribute("tabindex",this._savedTabIndex):e.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete e.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}get destroyed(){return this._destroyed}_throwIfDestroyed(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}get hasSavedTabIndex(){return null!==this._savedTabIndex}get node(){return this._throwIfDestroyed(),this._node}set savedTabIndex(e){this._throwIfDestroyed(),this._savedTabIndex=e}get savedTabIndex(){return this._throwIfDestroyed(),this._savedTabIndex}ensureUntabbable(){if(this.node.nodeType===Node.ELEMENT_NODE){const e=this.node;s.call(e,r)?-1===e.tabIndex&&this.hasSavedTabIndex||(e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex),e.setAttribute("tabindex","-1"),e.nodeType===Node.ELEMENT_NODE&&(e.focus=function(){},this._overrodeFocusMethod=!0)):e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex,e.removeAttribute("tabindex"))}}addInertRoot(e){this._throwIfDestroyed(),this._inertRoots.add(e)}removeInertRoot(e){this._throwIfDestroyed(),this._inertRoots.delete(e),0===this._inertRoots.size&&this.destructor()}}class e{constructor(e){if(!e)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=e,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),o(e.head||e.body||e.documentElement),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}setInert(t,e){if(e){if(!this._inertRoots.has(t)){e=new n(t,this);if(t.setAttribute("inert",""),this._inertRoots.set(t,e),!this._document.body.contains(t)){let e=t.parentNode;for(;e;)11===e.nodeType&&o(e),e=e.parentNode}}}else if(this._inertRoots.has(t)){const r=this._inertRoots.get(t);r.destructor(),this._inertRoots.delete(t),t.removeAttribute("inert")}}getInertRoot(e){return this._inertRoots.get(e)}register(e,t){let r=this._managedNodes.get(e);return void 0!==r?r.addInertRoot(t):r=new a(e,t),this._managedNodes.set(e,r),r}deregister(e,t){const r=this._managedNodes.get(e);return r?(r.removeInertRoot(t),r.destroyed&&this._managedNodes.delete(e),r):null}_onDocumentLoaded(){const e=i.call(this._document.querySelectorAll("[inert]"));e.forEach(function(e){this.setInert(e,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}_watchForInert(e,t){const o=this;e.forEach(function(e){switch(e.type){case"childList":i.call(e.addedNodes).forEach(function(e){if(e.nodeType===Node.ELEMENT_NODE){const t=i.call(e.querySelectorAll("[inert]"));s.call(e,"[inert]")&&t.unshift(e),t.forEach(function(e){this.setInert(e,!0)},o)}},o);break;case"attributes":if("inert"!==e.attributeName)return;const r=e.target;var t=r.hasAttribute("inert");o.setInert(r,t)}},this)}}if(!Element.prototype.hasOwnProperty("inert")){const t=new e(document);Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){t.setInert(this,e)}})}function c(e,t,r){if(e.nodeType==Node.ELEMENT_NODE){var o=e;t&&t(o);var i=o.shadowRoot;if(i)return void c(i,t,i);if("content"==o.localName){const d=o;var s=d.getDistributedNodes?d.getDistributedNodes():[];for(let e=0;e<s.length;e++)c(s[e],t,r);return}if("slot"==o.localName){const l=o;var n=l.assignedNodes?l.assignedNodes({flatten:!0}):[];for(let e=0;e<n.length;e++)c(n[e],t,r);return}}let a=e.firstChild;for(;null!=a;)c(a,t,r),a=a.nextSibling}function o(e){if(!e.querySelector("style#inert-style, link#inert-style")){const t=document.createElement("style");t.setAttribute("id","inert-style"),t.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",e.appendChild(t)}}}}();const KEYCODE={ESC:27,ENTER:13},userButton=document.querySelector(".header__user"),dialog=document.querySelector(".dialog"),dialogOverlay=dialog.querySelector(".dialog__overlay"),dialogCloseBtn=dialog.querySelector(".dialog__close-button");let previousActiveElement;const loginForm=dialog.querySelector(".dialog__form"),login=loginForm.querySelector(".dialog__item--login").querySelector(".dialog__input"),loginErrorMessage=loginForm.querySelector(".dialog__item--login").querySelector(".dialog__input-error"),password=loginForm.querySelector(".dialog__item--password").querySelector(".dialog__input"),passwordErrorMessage=loginForm.querySelector(".dialog__item--password").querySelector(".dialog__input-error"),loginFormSubmit=loginForm.querySelector(".dialog__submit");let isLoginValid=!1,isPasswordValid=!1;const search=document.querySelector(".search-form"),searchError=search.querySelector(".search-form__error"),searchErrorMessage=searchError.querySelector(".search-form__error-message"),searchInput=search.querySelector(".search-form__input"),subscription=document.querySelector(".footer__subscription-form"),subscriptionError=subscription.querySelector(".footer__form-error"),subscriptionErrorMessage=subscription.querySelector(".footer__form-error-text"),subscriptionInput=subscription.querySelector(".footer__input");function openDialog(){previousActiveElement=document.activeElement,document.body.style.overflow="hidden",Array.from(document.body.children).forEach(e=>{e!==dialog&&(e.inert=!0)}),dialog.classList.add("dialog--active"),dialogOverlay.addEventListener("click",closeDialog),dialogCloseBtn.addEventListener("click",closeDialog),document.addEventListener("keydown",checkCloseDialog),dialogCloseBtn.focus()}function checkCloseDialog(e){e.keyCode==KEYCODE.ESC&&closeDialog()}function closeDialog(){dialogOverlay.removeEventListener("click",closeDialog),dialogCloseBtn.removeEventListener("click",closeDialog),document.removeEventListener("keydown",checkCloseDialog),document.body.style.overflow="visible",Array.from(document.body.children).forEach(e=>{e!==dialog&&(e.inert=!1)}),dialog.classList.remove("dialog--active"),previousActiveElement.focus()}function validateField(e){e.preventDefault(),e.target==login?login.checkValidity()?(isLoginValid=!0,document.addEventListener("keyup",moveFocusToPassword),login.classList.contains("dialog__input--invalid")&&(login.classList.remove("dialog__input--invalid"),loginErrorMessage.classList.remove("dialog__input-error--visible"),loginErrorMessage.querySelector(".dialog__input-error-text").textContent="")):(login.classList.add("dialog__input--invalid"),loginErrorMessage.classList.add("dialog__input-error--visible"),loginErrorMessage.querySelector(".dialog__input-error-text").textContent="Поле содержит неверные символы",isLoginValid=!1):e.target==password&&(password.checkValidity()?(isPasswordValid=!0,password.classList.contains("dialog__input--invalid")&&(password.classList.remove("dialog__input--invalid"),passwordErrorMessage.classList.remove("dialog__input-error--visible"),passwordErrorMessage.querySelector(".dialog__input-error-text").textContent="")):(password.classList.add("dialog__input--invalid"),passwordErrorMessage.classList.add("dialog__input-error--visible"),passwordErrorMessage.querySelector(".dialog__input-error-text").textContent="Поле содержит меньше 6 символов",isPasswordValid=!1)),isLoginValid&&isPasswordValid?loginFormSubmit.hasAttribute("disabled")&&(loginFormSubmit.removeAttribute("disabled"),loginFormSubmit.focus(),loginForm.addEventListener("submit",function(e){e.preventDefault(),closeDialog(),loginForm.reset(),window.alert("Форма отправлена")})):isLoginValid&&isPasswordValid||loginFormSubmit.hasAttribute("disabled")||loginFormSubmit.setAttribute("disabled","disabled")}function moveFocusToPassword(e){e.keyCode==KEYCODE.ENTER&&password.focus(),document.removeEventListener("keyup",moveFocusToPassword)}function searchSubmit(e){e.preventDefault(),search.reset(),searchError.classList.contains("search-form__error--visible")||searchError.classList.add("search-form__error--visible"),searchErrorMessage.textContent="Не удалось отправить запрос, попробуйте еще раз позже",searchInput.addEventListener("click",function(){searchError.classList.contains("search-form__error--visible")&&(searchError.classList.remove("search-form__error--visible"),searchErrorMessage.textContent="")})}function subscriptionSubmit(e){e.preventDefault(),subscription.reset(),subscriptionError.classList.contains("footer__form-error--visible")||subscriptionError.classList.add("footer__form-error--visible"),subscriptionErrorMessage.textContent="Не удалось отправить запрос, попробуйте еще раз позже",subscriptionInput.addEventListener("click",function(){subscriptionError.classList.contains("footer__form-error--visible")&&(subscriptionError.classList.remove("footer__form-error--visible"),subscriptionErrorMessage.textContent="")})}userButton.addEventListener("click",openDialog),login.addEventListener("change",validateField),password.addEventListener("change",validateField),search.addEventListener("submit",searchSubmit),subscription.addEventListener("submit",subscriptionSubmit);let bullets;const swiper=new Swiper(".swiper-container",{direction:"horizontal",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},watchSlidesVisibility:!0,on:{init(){setTimeout(()=>{swiper.el.ariaRoleDescription="carousel";const e=document.querySelector(".swiper-pagination");bullets=e.querySelectorAll(".swiper-pagination-bullet"),e.setAttribute("role","group"),e.ariaLabel="Выберите слайд",makeCurrentBulletDisabled(bullets),Array.from(this.slides).forEach((e,t)=>{const r=e.querySelector(".slide");r.ariaRoleDescription="slide",e.classList.contains("swiper-slide-active")||(r.style.display="none"),bullets[t].ariaLabel=r.ariaLabel})},0)},transitionEnd(){Array.from(this.slides).forEach(e=>{e.classList.contains("swiper-slide-active")?e.querySelector(".slide").style.display="":e.querySelector(".slide").style.display="none"}),makeCurrentBulletDisabled(bullets)}}}),makeCurrentBulletDisabled=e=>{e.forEach(e=>{e.ariaDisabled=e.classList.contains("swiper-pagination-bullet-active")})};